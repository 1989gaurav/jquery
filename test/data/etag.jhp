<?

var ts = request.parsedURL.query.ts,
	etag = require("crypto").createHash("md5").update( ts ).digest("hex"),
	ifNoneMatch = request.headers[ "if-none-match" ];

if ( ifNoneMatch === etag ) {
	response.writeHead( 304 );
} else {
	response.setHeader( "Etag", etag );
	if ( ifNoneMatch ) {
		response.write( "OK: " + etag );
	} else {
		response.write( "FAIL" );
	}
}

response.end();
